<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=320,initial-scale=1.0">

<title>milkcocoaのテストSP</title>
<meta name="description" content="milkcocoaのテストSP">
<meta name="keywords" content="test,">
<meta name="format-detection" content="telephone=no">
<link href="./css/style.css" rel="stylesheet" type="text/css">
</head>

<body class="page-sp">
<div class="wrap">


<section id="Body">
	<div id="output">
		<div id="Ball" class="ball"></div>
	</div>
</section><!-- /#Body -->



<footer>
	<p class="text-center">Copyright &copy; ONEMOREDOT. inc. All rights reserved.</p>
</footer>

</div><!-- /.wrap -->
<script src="./js/libs/jquery-1.11.3.min.js"></script>
<script src="https://cdn.mlkcca.com/v2.0.0/milkcocoa.js"></script>
<script src="./js/function.js"></script>

<script>
$(function(){
	var currentMode = 'portrait';
	var output = document.getElementById('output');
	var ball_dom = document.getElementById('Ball');

	// app_idは自分のものに書き換えてください
	var milkcocoa = new MilkCocoa("maxigxffjt7.mlkcca.com");
	var ds = milkcocoa.dataStore('gravity');
	
	// randomでカラー生成
	function colorGen(){ 
		return '#'+Math.floor(Math.random()*16777215).toString(16); 
	}

	var _color = colorGen();
	var _ball = new Ball(ball_dom,200,200,60,_color);
	_ball.setRect($('#Body').outerWidth(),$('#Body').outerHeight());
	$('#Ball').css({
		'left':_ball.posX+'px',
		'top':_ball.posY+'px',
		'width':_ball.size+'px',
		'height':_ball.size+'px',
		'background-color': _ball.color
	});
	_ball.start();
	/*
	window.addEventListener('devicemotion', function(e){
		gravity = e.accelerationIncludingGravity;

		output.innerHTML
		= 'x方向: '+gravity.x
		+ '<br>y方向: '+gravity.y;

		sendModeFromGravityValue(gravity);

	},true);


	function sendModeFromGravityValue(g){

		// 絶対値を取得
		var x = Math.sqrt(g.x * g.x);
		var y = Math.sqrt(g.y * g.y);

		// portrait -> landscape
		if(currentMode === 'portrait' && x > 8.5 && y < 1.5){
			currentMode = 'landscape';
			ds.send({mode: currentMode});
		}

		// landscape -> portrait
		if(currentMode === 'landscape' && x < 1.5 && y > 8.5){
			currentMode = 'portrait';
			ds.send({mode: currentMode});
		}
	}
	*/
});
</script>


</body>
</html>